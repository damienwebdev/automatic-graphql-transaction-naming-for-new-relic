<?xml version="1.0" ?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <type name="Magento\Framework\GraphQl\Query\QueryProcessor">
        <plugin name="newRelicNameTransaction" sortOrder="10" type="JomaShop\NewRelicMonitoring\Plugin\NewRelicMonitoring"/>
    </type>
    <type name="Magento\Framework\GraphQl\Query\ErrorHandler">
        <plugin name="send_exception_trace_to_newrelic" type="JomaShop\NewRelicMonitoring\Plugin\ErrorHandler"/>
    </type>
    <type name="Magento\Webapi\Controller\Rest\SynchronousRequestProcessor">
        <plugin name="log_rest_error" type="JomaShop\NewRelicMonitoring\Plugin\SynchronousRequestProcessor"/>
    </type>
    <type name="JomaShop\NewRelicMonitoring\Controller\Soap">
        <plugin name="log_soap_error" type="JomaShop\NewRelicMonitoring\Plugin\Soap"/>
    </type>
    <preference for="Magento\Webapi\Controller\Soap" type="JomaShop\NewRelicMonitoring\Controller\Soap" />
</config>
